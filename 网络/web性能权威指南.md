 web性能权威指南
--

# MTU,
最大传输单元（英语：Maximum Transmission Unit，缩写MTU）是指一种通信协议的某一层上面所能通过的最大数据包大小（以字节为单位）。MTU是数据链路层的概念。MTU限制的是数据链路层的payload，也就是上层协议的大小，例如IP,标准的以太网数据帧大小是：1518，头信息有14字节，尾部校验和FCS占了4字节，所以真正留给上层协议传输数据的大小就是：1518 - 14 - 4 = 1500



--

# 延迟


- 高带宽低延迟



--

# Wi-Fi



--

# 移动网络


- 消除周期性队无效数据传输


- 渐进式加载资源弊大于利，最好预先，提前加载内容



--

# TCP


- 三次握手

客户端可以在发送ack分组后立即发送数据，而服务器必须等接收到ack分组才能发送数据
- 拥塞预防与控制


    - 流量控制


         - 接收窗口rwnd,通过tcp窗口缩放可达1g


    - 慢启动


         - 拥塞窗口cwnd

服务器实际上可向客户端发送4个tcp段，然后停下来等待确认。此后，每收到一个ack，慢启动算法就会告诉服务器可以将cwnd窗口增加1个tcp段。

把服务器的初始化cwnd增加到新规定的10段。
    - 拥塞预防


- 带宽延迟积,bdp


- 队首阻塞

tcp分组必须按照顺序到达，中途有一个分组没能到达，后续分组必须保存在接收端队tcp缓冲区，等待分组重发到达，这一起发生在tcp,应用层一无所知，应用程序只能通过套接字读取数据感觉延迟交付。这个效应就是tcp的队首阻塞。

--

# TLS

公钥加密系统只在建立tls信道队会话中使用。在此期间，服务器向客户端提供它队公钥，客户端生成对称密钥并使用服务器队公钥对其加密，然后再将加密队对称密钥返回服务器。服务器继而用自己的私钥解密出客户端队发来队对称密钥。

--

# HTTP


- HTTP1.1


    - keep alive


    - 使用http管道发送请求，服务器按fifo处理请求。


    - 使用多个tcp,域名划分


    - 连接与拼合，嵌入资源


- HTTP2.0


    - 流，信息和帧

通信都在一个连接上完成，可以双向数据流。每个数据流以消息队形式发送，消息由一个或多个帧组成，这些帧可以乱序发送，然后再根据每个帧首部队流标示符重新组装。

帧是这个协议通信多最小单位。所有帧都共享一个8字节多首部。
    - 多向请求与响应


    - 请求优先级


    - 流量控制


    - 服务器推送


    - 首部压缩

