# 平台化


# 设计方案考虑


- 差异化的统一管理。


    - pins工程+Flavor管理的方案。


- 基础服务的复用。


    - 不同baseActivity实现多个接口


- 基础组件的复用。


    - 基础通用组件


    - 基础业务组件


- 页面的复用。


    - 页面模块化：先将页面功能按照业务相似性以及两端差异拆分成高内聚低耦合的功能单元Block，然后两端页面使用拆分的功能单元Block像搭积木似的搭建页面，单个的单元Block可以采用MVP模式实现。





# 整体设计


- 1. 基础服务层：包含多端统一的基础服务和有差异的基础服务，其中统一的基础服务包括网络库、图片库、统计、监控等。对于登录、分享、定位等外卖App和外卖频道两端有差异的部分，我们通过抽象服务层来屏蔽两端的差异。


- 2. 基础组件层：包括统一的两端Model、埋点、下拉刷新、权限、Toast、A/B测试、Utils等两端复用的基础组件。


- 3. 业务层：包括外卖的具体业务模块，目前可以分为列表页模块（如首页、金刚页等）、商家模块（如商家页、商品详情页等）和订单模块（如下单页、订单状态页等）。这些业务模块的特点是：模块间复用可能性小，模块内的复用可能性大。


- 4. 宿主层：主要是初始化服务，例如Application的初始化、dex加载和其他各种必要的组件的初始化。




# 康威定律：
设计系统的组织，其产生的设计等同于组织之内、组织之间的沟通结构。





# 三级工程结构，
指的是工程→module→p工程的三级结构。我们可以将任何一个非常复杂的业务工程内部划分成若干个独立单元的module工程，同时独立单元的module工程，我们可以继续去划分它内部的独立p工程。因为module是具备编译时的代码隔离的，边界是不容易被打破的，它可以随时升级为一个工程。需要通信的p工程依赖module的主目录，base目录，通过base目录实现通信。工程和module具有编译上隔离代码的能力，p工程具有最小约束代码边界的能力，这样的设计可以使得工程内边界清晰，向下依赖。

